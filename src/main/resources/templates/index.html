<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<!-- import head -->

<head th:replace="~{import/head :: headFragment (title=${title})}"></head>
<!-- head속성 -->

<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta content="온라인서점,nhnacademy,Buzz-Book" name="keywords"/>
  <meta content="nhnacademy be-6 aa팀의 온라인서점(Buzz-Book)입니다." name="description"/>
  <script src="https://js.tosspayments.com/v1/payment-widget"></script>
  <style>
    .latest-products-container {
      margin-top: 2rem;
      overflow-x: auto;
      white-space: nowrap;
      padding-bottom: 1rem;
    }

    .latest-products-title {
      font-size: 1.8rem;
      font-weight: bold;
      color: #007bff;
      margin-bottom: 1rem;
      text-align: center;
    }

    .latest-products {
      display: flex;
      gap: 1rem;
    }

    .product-card {
      background: #fff;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 1rem;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      width: 220px;
      text-align: center;
      display: inline-block;
      vertical-align: top;
    }

    .product-card img {
      max-width: 100%;
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .product-card .product-name {
      font-size: 1.1rem;
      font-weight: bold;
      color: #333;
      margin-bottom: 0.5rem;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2; /* number of lines to show */
      -webkit-box-orient: vertical;
      white-space: normal;
    }

    .product-card .product-price {
      font-size: 1rem;
      color: #007bff;
      margin-bottom: 1rem;
    }
  </style>
</head>

<body class="flex flex-col">
<!-- Navbar Start -->
<div class="fixed top-0 w-full flex justify-center align-center h-[100px] z-[1000] bg-white dark:bg-[#363639]">
  <div class="max-w-[1200px] w-full my-auto">
    <div th:replace="~{components/navbar :: navbarFragment}"></div>
  </div>
</div>
<!-- Navbar End -->

<!--	progress bar start -->
<div class="nav-progress-wrap w-full h-[3px] fixed top-[100px] z-[100]">
  <div class="nav-progress-bar h-[3px] bg-[#81c408] dark:bg-[#6ba007]"></div>
</div>
<!-- progress bar end -->
<div style="height: 100px;"></div>
<div class="flex flex-col justify-center">
  <div class="max-w-[1200px] w-full mx-auto p-4 min-h-[calc(100vh-418px)]">
    <div class="flex-grow flex-col">
      <!-- main -->
      <div th:if="${page != null and #strings.equals(page, 'main')}">
        <div th:replace="~{pages/main :: mainPageFragment('couponPolicies')}"></div>

        <div class="latest-products-container">
          <h2 class="latest-products-title">신간 상품</h2>
          <div class="latest-products">
            <div class="product-card" th:each="product : ${latestProducts}">
              <img th:src="${product.thumbnailPath}" alt="Product Image"/>
              <div class="product-name" th:text="${product.productName}">상품 이름</div>
              <div class="product-price" th:text="${product.price}">가격</div>
              <!-- 추가 정보 필요 시 더 추가 -->
            </div>
          </div>
        </div>
      </div>
      <!-- product -->
      <div th:if="${page != null and #strings.equals(page, 'product')}">
        <div th:replace="~{pages/product/product-list :: productListFragment('products','productPage','query','productType', 'categoryInfo')}"></div>
      </div>
      <!-- product detail -->
      <div th:if="${page != null and #strings.equals(page, 'product-detail')}">
        <div th:replace="~{pages/product/product-detail :: productDetailPageFragment('product','book','categoryInfo','reviews', 'recommendProducts', 'couponPolicies')}"></div>
      </div>
      <!-- cart -->
      <div th:if="${page != null and #strings.equals(page, 'cart')}">
        <div th:replace="~{pages/cart :: cartPageFragment('cart')}"></div>
      </div>
      <!-- myinfo -->
      <div th:if="${page != null and #strings.equals(page, 'activate')}">
        <div th:replace="~{pages/register/activate :: activateFragment('token')}"></div>
      </div>
      <div th:if="${page != null and #strings.equals(page, 'mypage-index')}">
        <div th:replace="~{pages/mypage/index :: mypageIndexFragment('fragment', 'user')}"></div>
      </div>
      <div th:if="${page != null and #strings.equals(page, 'myinfo')}">
        <div th:replace="~{pages/mypage/info :: myinfoPageFragment('user')}"></div>
      </div>
      <div th:if="${page != null and #strings.equals(page, 'info-edit')}">
        <div th:replace="~{pages/mypage/info-edit :: myinfoEditPageFragment('user')}"></div>
      </div>
      <div th:if="${page != null and #strings.equals(page, 'mypage-address')}">
        <div th:replace="~{pages/mypage/addressList :: myAddressPageFragment('addressList')}"></div>
      </div>
      <div th:if="${page != null and #strings.equals(page, 'deactivate')}">
        <div th:replace="~{pages/mypage/deactivate :: myDeactivatePageFragment}"></div>
      </div>
      <!-- order -->
      <div th:if="${page != null and #strings.equals(page, 'order')}">
        <div th:replace="~{pages/order :: orderPageFragment ('myInfo', 'addressInfos', 'createOrderRequest', 'packages', 'policies', 'myPoint', 'myCoupons')}">
        </div>
      </div>
      <!-- nonmemberorder -->
      <div th:if="${page != null and #strings.equals(page, 'nonMemberOrder')}">
        <div th:replace="~{pages/non-member-order-view :: nonMemberOrderFragment ('myOrder')}"></div>
      </div>
      <div th:if="${page != null and #strings.equals(page, 'nonMemberOrderForm')}">
        <div th:replace="~{pages/non-member-order-finder :: nonMemberOrderFormFragment ('nonMemberOrderForm')}"></div>
      </div>
      <!-- mypage -->
      <div th:if="${page != null and #strings.equals(page, 'mypage-orders')}">
        <div th:replace="~{pages/mypage/my-page-order :: myPageOrdersFragment ('myOrders', 'total', 'currentPage')}"></div>
      </div>
      <div th:if="${page != null and #strings.equals(page, 'mypage-coupons')}">
        <div th:replace="~{pages/mypage/my-page-coupon :: myPageCouponFragment ('coupons')}"></div>
      </div>
      <div th:if="${page != null and #strings.equals(page, 'mypage-points')}">
        <div th:replace="~{pages/mypage/my-page-point :: myPagePointsFragment ('points')}"></div>
      </div>
      <!-- mybilllog -->
      <div th:if="${page != null and #strings.equals(page, 'mybilllog')}">
        <div th:replace="~{pages/mypage/my-billlog :: myBillLogFragment ('myBillLogs')}"></div>
      </div>
      <!-- success -->
      <div th:if="${page != null and #strings.equals(page, 'success')}">
        <div th:replace="~{pages/success :: orderSuccessFragment ('orderResult')}"></div>
      </div>
      <!-- fail -->
      <div th:if="${page != null and #strings.equals(page, 'fail')}">
        <div th:replace="~{pages/fail :: orderFailFragment}"></div>
      </div>
      <!-- error -->
      <div th:if="${page != null and #strings.equals(page, 'error')}">
        <div th:replace="~{pages/error :: errorPageFragment('error', 'state')}"></div>
      </div>
      <!-- faq -->
      <div th:if="${page != null and #strings.equals(page, 'faq')}">
        <div th:replace="~{pages/question/faq :: faqPageFragment}"></div>
      </div>
      <!-- todo | Page 추가 -->
    </div>
  </div>
</div>
<!-- Footer Start -->
<div>
  <div th:replace="~{components/footer :: footerFragment}"></div>
</div>

<!-- Footer End -->

<!-- JavaScript Libraries -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

<!-- Template Javascript -->
<script src="/static/js/main.js"></script>

</body>

</html>
