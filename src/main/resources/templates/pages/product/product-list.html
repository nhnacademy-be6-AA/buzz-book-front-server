<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">


<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product List</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
<div th:fragment="productListFragment('products')" class="container">

  <header class="my-4">
    <h1>buzz-book</h1>
    <div class="row mb-3">
      <div class="col-md-4">
        <select id="productTypeSelect" class="form-select">
          <option value="" th:selected="${productType == null}">---선택---</option>
          <option th:each="type : ${stockStatusOptions}" th:value="${type}" th:text="${type}" th:selected="${type == productType}"></option>
        </select>
      </div>
      <div class="col-md-4">
        <input type="text" id="searchQuery" class="form-control" placeholder="상품 정보를 입력해주세요">
      </div>
      <div class="col-md-4">
        <button class="btn btn-primary" onclick="handleSearch()">검색</button>
        <button class="btn btn-secondary" onclick="clearFilters()">필터 해제</button>
      </div>
    </div>
  </header>

  <nav class="mb-4">
    <ul class="nav nav-pills">
      <li class="nav-item">
        <a class="nav-link" href="#">인기상품</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">국내도서</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">굿즈</a>
      </li>
    </ul>
  </nav>

  <div class="list-group">
    <div th:each="product : ${productPage.content}" class="list-group-item">
      <div class="row">
        <div class="col-md-2 product-image">
          <img th:src="${product.thumbnailPath}" alt="Product Image" style="max-width: 150px; height: auto; border-radius: 10px;">
        </div>
        <div class="col-md-7">
          <h5>
            <a th:href="@{/product/{id}(id=${product.id})}" th:text="${product.productName}">Product Title</a>
          </h5>
          <p th:text="${product.description}">상품설명</p>
          <p class="font-weight-bold" th:text="${product.price}">Product Price</p>
        </div>
        <div class="col-md-3 product-actions">
          <button class="btn btn-outline-primary btn-sm" th:onclick="'location.href=\'/cart/add/' + ${product.id} + '\''">장바구니</button>
          <button class="btn btn-primary btn-sm" th:onclick="'location.href=\'/product/' + ${product.id} + '\''">바로구매</button>
          <button class="btn btn-secondary btn-sm">보관함</button>
        </div>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-center my-4">
    <nav aria-label="Page navigation">
      <ul class="pagination">
        <li class="page-item" th:classappend="${!productPage.hasPrevious()} ? 'disabled'">
          <a class="page-link" th:href="@{/product(page=${productPage.number - 1})}" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        <li class="page-item" th:each="i : ${#numbers.sequence(1, productPage.totalPages)}" th:classappend="${i == productPage.number + 1} ? 'active'">
          <a class="page-link" th:href="@{/product(page=${i - 1})}" th:text="${i}"></a>
        </li>
        <li class="page-item" th:classappend="${!productPage.hasNext()} ? 'disabled'">
          <a class="page-link" th:href="@{/product(page=${productPage.number + 1})}" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>


</html>